using Unity;
using UnityEngine;
using System.Collections;
using System.Collections.Generic;


public class EnemyDetector{

    public GameObject[] allEnemies;
    public GameObject nearestEnemy;
    public float distanceFromPlayer {get; private set;};
    private float angleFromPlayer;
    private float nearestDistance = 10000;
    private float attackAngle = 60f;

    void Start(){

        allEnemies = GameObject.FindGameObjectWithTag("Enemy");
        
        getNearestEnemy();


        
    }


    public void getNearestEnemy(){
        for (int i = 0; i < allEnemies.length; i++){
            distance = Vector3.Distance(this.transform.position, allEnemies[i].transform.position);
            Vector3 directionToPlayer = this.transform.position - allEnemies[i].transform.position;
            float angleFromPlayer = Vector3.Angle(directionToPlayer, this.transform.forward)

            if(distanceFromPlayer < nearestDistance & angleFromPlayer < attackAngle / 2f){
                nearestEnemy = allEnemies[i];
                nearestDistance = distanceFromPlayer;
            }
        }
    }
}